<!--ヘッダー用部分テンプレート-->

<nav>
  <!--各リンク-->
  <ul class="application__header--searchForm">
    <%= form_with url: patterns_path, local: true, method: :get do | f | %>
    <li>
      <%= f.text_field "search[keyword]", placeholder: "サイト内検索", class: "form-control application__search--form" %>
    </li>
    <li>
      <%= f.submit '検索', class: 'btn btn-default' %>
    </li>
    <% end %>
  </ul>
  <ul class="application__header--interface">
    <li><%= link_to "トップ", root_path %></li>
    <li><%= link_to "ライフゲームとは？", about_path %></li>
    <li><%= link_to "投稿一覧", patterns_path %></li>

    <% if user_signed_in? then %>
    <!--ログインユーザ用インターフェース-->

    <!--プロフィール画像-->
    <li><%= attachment_image_tag current_user, :profile_image, size:"30x30", format: "jpeg", fallback: "no_image.jpg", size:"30x30" %></li>
    <!--ドロップダウンリスト（トップ表記）-->
    <li id="menue-parent">
      こんにちは、<br>
      <%= current_user.name.truncate( 10 ) %>さん▼
      <!--ドロップダウンリスト-->
      <ul id="menue-child">
        <li>
          <!--タイトル-->
          <%= content_tag :span, '', class: "glyphicon glyphicon-list", aria: { hidden: true }, style: "color: rgba(0,0,0,0);" %>
          　メニュー
        </li>
        <li>
          <!--ログインユーザ中のページへのリンク-->
          <%= content_tag :span, '', class: "glyphicon glyphicon-user", aria: { hidden: true } %>
          <%= link_to "　マイページ", member_path( current_user ) %>
        </li>
        <li>
          <!--パターン新規作成ページへのリンク-->
          <%= content_tag :span, '', class: "glyphicon glyphicon-plus", aria: { hidden: true } %>
          <%= link_to "　パターン作成", edit_making_path %>
        </li>
        <li>
          <!--セルの表示形式編集用リンク-->
          <%= content_tag :i, "", class: "fas fa-th-large" %>
          <%= link_to "　セルの表示編集", new_display_format_path %>
        </li>
        <li>
          <!--ログアウト用リンク-->
          <%= content_tag :span, '', class: "glyphicon glyphicon-share", aria: { hidden: true } %>
          <%= link_to "　ログアウト", destroy_user_session_path, method: :delete, data: { confirm: "ログアウトしてよろしいですか？" } %>
        </li>
      </ul>
    </li>

    <% else %>
    <!--非ログインユーザ用インターフェース-->

    <!--ウェルカムメッセージ-->
    <li style="text-align: left;">
      <%= link_to new_user_session_path do %>
      ようこそ！<br>
      ログイン
      <%= content_tag :span, '', class: "glyphicon glyphicon-log-in", aria: { hidden: true }, style: "font-size: 10px;" %>
      <% end %>
    </li>
    <% end %>
  </ul>
</nav>
